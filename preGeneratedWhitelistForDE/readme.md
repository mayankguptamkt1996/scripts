# Whitelist genaration for DE events

Turnstiles whitelist that is a combination of barcodes and QR codes
This is a hack for Zomaland and FC GOA 2022
Different types of tickets and what the whitelist should pick for them
 Tickets generated by Zomato - check by billing email
  - pick barcodes - these tickets include tickets generated after the pregenerated whitelist push
  Tickets sold on Insider
  - pick qr codes - these tickets includes tickets generated after the pregenerated whitelist push
   Additional whitelist
 Get all of the additional whitelist pre-generated for an item and add it to the list 

## Steps - 

Case → FC GOA:

1.) ops team will give the items ids and their respective count
2.) before running script verify in the count in whitelist collection using {"core_item_id":<item_id>} . It should be zero.
3.) paste the item id and count on line no. 21-23 in  - zomaland/generateWhitelists.js (single item), for multiple item use bulkGenerateWhitelists.js (put input csv file name in line 27 and format of csv should be similar to bulkUpsertSample.csv) and run the script
4.) verify the count for each item id on whitelist collection again
5.) Make the changes in logistics repo. Add the item_ids in config/live.js file (sample PR - https://github.com/only-much-louder/insider-logistics/pull/176) 
6.) Run the jenekins job http://jenkins-mumbai.internal.insider.in/job/logistics-server/
7.) Ask the ops team to issue tickets and verify . 
8.) After they have verified , run this script - Zomaland 2022 - DE/fetchDEWhitelistForTurnstiles.js . For running the script you have paste the event id on line 28. 
Before running script , make sure you have created whitelist_exports folder in this Zomaland 2022 - DE.

Case → Zomaland:

Follow same steps as above only difference is while fetching the whitelist i.e. while running fetchDEWhitelistForTurnstiles.js the code changes are 
Uncomment lines (83 to 85 ) And
Uncomment lines (100 to 112 ).